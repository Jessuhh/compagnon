# Migration `20210113125718-database-updates`

This migration has been generated by Joehoel at 1/13/2021, 1:57:18 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Leaderboard" DROP CONSTRAINT "Leaderboard_scoreId_fkey"

ALTER TABLE "Leaderboard" DROP COLUMN "scoreId"

ALTER TABLE "Score" ADD COLUMN     "leaderboardId" INTEGER

ALTER TABLE "Score" ADD FOREIGN KEY("leaderboardId")REFERENCES "Leaderboard"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210113120252-convert-score-to-string..20210113125718-database-updates
--- datamodel.dml
+++ datamodel.dml
@@ -2,38 +2,38 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
 }
 model Game {
   id          Int           @id @default(autoincrement())
-  createdAt   DateTime      @default(now())
   name        String        @unique
   imageUrl    String?
   Leaderboard Leaderboard[]
+  createdAt   DateTime      @default(now())
 }
 model Leaderboard {
   id        Int      @id @default(autoincrement())
-  createdAt DateTime @default(now())
   name      String
-  createdBy String
   game      Game     @relation(fields: [gameId], references: [id])
   gameId    Int
-  Score     Score?   @relation(fields: [scoreId], references: [id])
-  scoreId   Int?
+  createdBy String
+  Score     Score[]
+  createdAt DateTime @default(now())
 }
 model Score {
-  id          Int           @id @default(autoincrement())
-  score       String
-  Leaderboard Leaderboard[]
-  user        String
-  createdAt   DateTime      @default(now())
-  evidence    String?
+  id            Int          @id @default(autoincrement())
+  score         String
+  user          String
+  evidence      String?
+  createdAt     DateTime     @default(now())
+  Leaderboard   Leaderboard? @relation(fields: [leaderboardId], references: [id])
+  leaderboardId Int?
 }
```


